#!/usr/bin/env bash

###########################################################################
#                            navigation                                   #
###########################################################################

# Easier navigation: .., ..., ...., ....., ~ and -
alias ..="cd .."
alias ...="cd ../.."
alias ....="cd ../../.."
alias .....="cd ../../../.."
alias -- -="cd -"

###########################################################################
#                            vim                                          #
###########################################################################

# vim
alias v="$EDITOR $@"
alias av="$EDITOR -p $@"

###########################################################################
#                            chezmoi and awesome related                  #
###########################################################################

alias dotfiles="cd $CHEZMOI_DIR"
# chezmoi and awesome
alias e="$CHEZMOI_BIN edit --apply $@"
# allows ca to dry-run only
alias dca="source {{ .chezmoi.homedir }}/.localrc && ${CHEZMOI_BIN} apply ${CHEZMOI_OPTS_DRY}"
alias ca="source {{ .chezmoi.homedir }}/.localrc && ${CHEZMOI_BIN} apply ${CHEZMOI_OPTS}"

{{- if and (eq .chezmoi.os "linux") (.personal) }}
alias awesomedir="cd {{ .chezmoi.sourceDir }}/private_dot_config/exact_awesome"
alias vimdir="cd {{ .chezmoi.sourceDir }}/private_dot_config/vim"
alias aconf="$VISUAL -p $CHEZMOI_DIR/private_dot_config/exact_awesome/*.lua"
alias awet="awmtt start -C $XDG_CONFIG_HOME/awesome/rc.lua.test"
{{- end }}

###########################################################################
#                            file dir                                     #
###########################################################################

# shortcut to open
# probably the most important directories
alias cs="cd $XDG_CONFIG_DOCUMENTS/cs"

# mcmaster vpn connect via studentvpn.mcmaster.ca
alias compeng="$XDG_CONFIG_DOCUMENTS/cs/mcmaster && `\ls -t $XDG_CONFIG_DOCUMENTS/cs/mcmaster | head -n1`"

alias bentodir="$XDG_CONFIG_DOCUMENTS/cs/BentoML"
alias bento="bentoml $@"

###########################################################################
#                            service related                              #
###########################################################################

# check internet
alias speedtest="watch -n 1 ping -c 1 google.com"
alias net="ping google.com | grep -E --only-matching --color '[0-9\.]+ ms'"
# IP addresses
alias ip4='dig -4 TXT +short o-o.myaddr.l.google.com @ns1.google.com'
alias ip6='dig TXT +short o-o.myaddr.l.google.com @ns1.google.com'
alias dlisten='ss -lntu | grep $1'

alias cryptoprice="curl rate.sx"
alias weather="curl wttr.in/$CITY"

###########################################################################
#                            application                                  #
###########################################################################

# odoo
alias odoo-bin="${ODOO_PATH}/odoo-bin ${ODOO_OPTS}"

# docker and kubectl related
alias dockerprune="docker system prune -a -f"
{{- if `command -v kubectl` }}
alias kubesecret="kubectl get secret regcred --output=yaml"
{{- end }}

# git
alias g="git"

{{- if `command -v nnn` }}
# nnn intensifies
alias ncp="cat ${NNN_SEL:-${XDG_CONFIG_HOME:-$HOME/.config}/nnn/.selection} | tr '\0' '\n'"
alias np="nnn-preview"
alias N="sudo -E nnn -dDH"
alias ls="n -dDeUHatT"
{{- end }}

{{- if `command -v tmux` }}
alias tmux="TERM=xterm-256color ${aliases[tmux]:-tmux} ${TMUX_OPTS}"
{{- end }}

alias ag="ag --color --color-line-number '0;35' --color-match '46;30' --color-path '4;36'"

# List all files colorized in long format
alias la="\ls ${LS_OPTS} ${colorflag}"

# Enable aliases to be sudo’ed
alias sudo='nocorrect sudo'

# Get week number
alias week='date +%V'


# URL-encode strings
alias urlencode='python -c "import sys, urllib as ul; print ul.quote_plus(sys.argv[1]);"'

# Intuitive map function
# For example, to list all directories that contain a certain file:
# find . -name .gitattributes | map dirname
alias map="xargs -n1"

# One of @janmoesen’s ProTip™s
for method in GET HEAD POST PUT DELETE TRACE OPTIONS; do
    alias "${method}"="lwp-request -m '${method}'"
done

# battery
alias bat='upower -i /org/freedesktop/UPower/devices/battery_BAT1| grep -E "state|to\ full|percentage"'

#Lock the screen (when going AFK)
{{- if eq .chezmoi.os "darwin" }}
alias afk="/System/Library/CoreServices/Menu\ Extras/User.menu/Contents/Resources/CGSession -suspend"
{{- else if and (eq .chezmoi.os "linux") (.personal) }}
alias afk="xsecurelock"
{{- end }}

# Reload the shell (i.e. invoke as a login shell (-l))
alias reload="exec -l ${SHELL}"

# Print each PATH entry on a separate line
alias path='echo -e ${PATH//:/\\n}'

# Safe ops. Ask the user before doing anything destructive.
alias rmi="${aliases[rm]:-rm} -i"
alias mvi="${aliases[mv]:-mv} -i"
alias cpi="${aliases[cp]:-cp} -i"
alias lni="${aliases[ln]:-ln} -i"

# File Download
if (( $+commands[curl] )); then
    alias get='curl --continue-at - --location --progress-bar --remote-name --remote-time'
elif (( $+commands[wget] )); then
    alias get='wget --continue --progress=bar --timestamping'
fi
